

## Что такое генератор и как он работает?

- Генератор — это объект, который сразу при создании не вычисляет значения всех своих элементов.
- Он хранит в памяти только последний вычисленный элемент, правило перехода к следующему и условие, при котором выполнение прерывается.
- Вычисление следующего значения происходит лишь при выполнении метода next(). Предыдущее значение при этом теряется.

Этим генераторы отличаются от списков — те хранят в памяти все свои элементы, и удалить их можно только программно. Вычисления с помощью генераторов называются ленивыми, они экономят память.

Рассмотрим пример: создадим объект-генератор gen с помощью так называемого генераторного выражения. Он будет считать квадраты чисел от 1 до 4 — такую последовательность создаёт функция range(1,5).

`>>> a = (i**2 for i in range(1,5)) 
`>>> a <generator object <genexpr> at 0x0000023A7524D6D0> 
`>>> next(a) 1
`>>> next(a) 4 
`>>> next(a) 9 
`>>> next(a) 16 
`>>> next(a) 
`Traceback (most recent call last):   File "<stdin>", line 1, in <module> StopIteration`

Когда мы выведем на консоль переменную gen, то увидим лишь сообщение, что это объект-генератор.

При четырёх вызовах метода next(a) будут по одному рассчитываться и выводиться на консоль значения генератора: 1, 4, 9, 16. Причём в памяти будет сохраняться только последнее значение, а предыдущие сотрутся.

Когда мы попытаемся вызвать next(gen) в пятый раз, генератор сотрёт из памяти последний элемент (число 16) и выдаст исключение StopIteration.

`>>> next(gen) Traceback (most recent call last):   File "<stdin>", line 1, in <module> StopIteration`

Всё! Генератор больше не работает. Сколько бы мы ни вызывали next(gen), ничего считаться не будет. Чтобы запустить генератор ещё раз, придётся создавать его заново.






- генератор возвращает объект генератора: 
	`g = (k for k in range(1,21) if k%3!=0)`
	`print(g)`
	
	output:
	`<generator object <genexpr> at 0x7c1e267279f0>`

	*можно применит функцию **list()** или **tuple()**:*
		`print(list(g))`
		`print(tuple(g))`
		
		output:
		[1, 2, 4, 5, 7, 8, 10, 11, 13, 14, 16, 17, 19, 20]
		() - генератор после использования исчезает.

		
		



- генерация кортежа с элементами **от 1 до 21** (невкл) без элементов, кратных **3**:
	`a = tuple(k for k in range(1,21) if k%3!=0)`
	`print(a)`
	
	output:
	`(1, 2, 4, 5, 7, 8, 10, 11, 13, 14, 16, 17, 19, 20)`


- генерация списка (можно использовать просто квадратные скобки без функции **list()**)
	`b = [2**(k//2) if k%2==0 else 3**(k//2) for k in range(15)]`
	`print(b)`

	output:
	`[1, 1, 2, 3, 4, 9, 8, 27, 16, 81, 32, 243, 64, 729, 128]`


